/**
* NOTICE OF LICENSE
*
* This file is part of the 'Wk Warehouses Management For Prestashop 1.7' module feature.
* Developped by Khoufi Wissem (2018).
* You are not allowed to use it on several site
* You are not allowed to sell or redistribute this module
* This header must not be removed
*
*  @author    KHOUFI Wissem - K.W
*  @copyright Khoufi Wissem
*  @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*/
function initCartButton(){$("#add-to-cart-or-refresh button.add-to-cart").on("click",function(t){var a,e,o,r,d,n;return t.preventDefault(),t.stopPropagation(),a=$("#product_page_product_id").val(),e=$("#id_customization").val(),o=getProductData(),r="undefined"!==o?parseInt(o.id_product_attribute):0,(d=void 0!==$("#quantity_wanted")&&$("#quantity_wanted").length?parseInt($("#quantity_wanted").val()):1)<1?(fancyCloseBox(txt_invalid_qty,"danger"),!1):(n={ajax:!0,action:"assignProductInCart",id_product:a,id_product_attribute:r},$.ajax({url:process_cart_url,type:"POST",dataType:"json",data:n,success:function(t){if(void 0!==t.isMultiCarriersInCart&&t.isMultiCarriersInCart)fancyCloseBox(t.message,"danger");else{var o={ajax:1,add:1,action:"update",id_product:a,id_customization:e,qty:d,token:prestashop.static_token};r>0&&(o.id_product_attribute=r),$.post(prestashop.urls.pages.cart,o,null,"json").then(function(t){prestashop.emit("updateCart",{reason:{idProduct:t.id_product,idProductAttribute:t.id_product_attribute,idCustomization:t.id_customization,linkAction:"add-to-cart",cart:t.cart},resp:t})}).fail(function(t){prestashop.emit("handleError",{eventType:"addProductToCart",resp:t})})}}}),!1)})}function fancyCloseBox(t,a){var e='<p style="text-align:right; padding-bottom: 0" class="submit">';e+='<input type="button" onclick="$.fancybox.close();" value="'+txt_ok+'" class="button btn btn-danger">',e+="</p>",$.fancybox('<div class="alert alert-'+a+'">'+t+"</div>"+e)}function getProductData(){if($product_details_element=$("#product-details").length>0?$("#product-details"):$("#product-detail"),void 0===$product_details_element.attr("data-product")&&($product_details_element=$("[data-product]")),$product_details_element.length>0&&void 0!==$product_details_element.attr("data-product"))return $.parseJSON($product_details_element.attr("data-product"))}$(document).ready(function(){null!=window.prestashop&&prestashop.on("updatedProduct",function(t){initCartButton()}),initCartButton()});